multiCluster: true

validators:
  defaultRegistry: registry.chutes.ai
  defaultApi: https://api.chutes.ai
  supported:
    - hotkey: 5Dt7HZ7Zpw4DppPxFM7Ke3Cm7sDAWhsZXmM5ZAmE7dSVJbcQ
      registry: registry.chutes.ai
      api: https://api.chutes.ai
      socket: wss://ws.chutes.ai

registry:
  image: nginx:1.27
  imagePullPolicy: IfNotPresent
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 500m
      memory: 512Mi
  service:
    type: ClusterIP
    port: 5000
    targetPort: 5000
    # BE SURE THIS MATCHES registry_port IN ANSIBLE!
    nodePort: 30500
  nodeSelector:
    nvidia.com/gpu.present: "true"
  config:
    workerProcesses: 1
    workerConnections: 1024
    keepaliveTimeout: 65
    clientMaxBodySize: "0"
    validators:
      allowedHosts:
        - "registry.chutes.ai"
      defaultUpstream: "registry.chutes.ai"

auth:
  image: parachutes/registry:k3s-latest
  imagePullPolicy: Always
  resources:
    requests:
      cpu: 250m
      memory: 256Mi
    limits:
      cpu: 250m
      memory: 256Mi
  port: 8000

agent:
  image: parachutes/chutes-agent:k3s-latest
  imagePullPolicy: Always
  resources:
    requests:
      cpu: "500m"
      memory: "1Gi"
    limits:
      cpu: "1"
      memory: "2Gi"
  service:
    type: NodePort
    nodePort: 32000
    port: 8000
    targetPort: 8000
  nodeSelector: {}
  affinity: {}

failedChuteCleanup:
  image: bitnamilegacy/kubectl:latest

# Miner credentials - These are provided via Ansible deployment
# These values are automatically injected during deployment and should not be set manually
# as they are sensitive values
minerCredentials:
  # SS58 address for the miner - provided by Ansible from hotkey file
  ss58Address: "REPLACE_WITH_ANSIBLE_SS58_ADDRESS"
  # Secret seed for the miner (hex prefix removed) - provided by Ansible from hotkey file  
  secretSeed: "REPLACE_WITH_ANSIBLE_SECRET_SEED"